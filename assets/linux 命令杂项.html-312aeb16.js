import{_ as n,W as s,X as i,Y as p,Z as a,$ as r,a0 as t,E as l}from"./framework-1046fca1.js";const o={},d=t('<h1 id="linux-命令杂项" tabindex="-1"><a class="header-anchor" href="#linux-命令杂项" aria-hidden="true">#</a> linux 命令杂项</h1><h2 id="linux-个人笔记" tabindex="-1"><a class="header-anchor" href="#linux-个人笔记" aria-hidden="true">#</a> linux 个人笔记</h2><h3 id="_1-终端控制台-最多同时开六个终端控制台" tabindex="-1"><a class="header-anchor" href="#_1-终端控制台-最多同时开六个终端控制台" aria-hidden="true">#</a> 1.终端控制台：最多同时开六个终端控制台</h3><p>Alt+F1~Alt+F6 切换控制台</p><p>运行级别：init 0123456 0：关机 1：单用户 2：多用户无网络 3：多用户有网络（常用） 4：系统未使用保留给用户 5：图形界面 6：系统重启</p><p>3和5比较常用</p><p>启动文件放置路径 /etc/inittab</p><p>runlevel 查看运行级别 init num 切换运行级别</p><p>logout exit 注销 startx 注销重启进入5图形界面</p><p>关机：之前最好将数据同步写入硬盘 sync init 0 shutdown -h now 关机后停止系统 shutdown -h 1 一分钟后关机 halt</p><p>重启： init 6 shutdown -r now reboot</p><h3 id="_2-文件系统" tabindex="-1"><a class="header-anchor" href="#_2-文件系统" aria-hidden="true">#</a> 2.文件系统</h3><p>目录 root boot home bin sbin mnt etc var</p><p>/：根目录 /bin：常用命令 /sbin：超级命令，需要权限</p><p>/home：普通用户相关文件 /home/root/.bash_profile 用户变量 /root：root用户相关文件</p><p>/boot：引导相关的文件</p><p>/dev：设备文件存储目录</p><p>/mnt：临时文件系统挂载点，挂载光驱、软驱 /mnt/cdrom/ /media：即插即用型存储设备的挂载点，比如U盘、CDROM/DVD</p><p>/lib：库文件和内核模块所存放的目录</p><p>/etc：配置相关文件 /etc/profile 环境变量文件<br> /etc/passwd 用户的属性记录<br> /etc/inittab 系统初始化脚本 修改运行默认级别 /etc/rc.d/init.d/ 所有的服务启动文件被储存在此目录下 /etc/rc.d/rc.sysinit 系统默认配置</p><p>/etc/sysconfig/i18n 修改linux语言环境 /etc/sysconfig/network 修改网卡信息</p><p>/usr：非常大，所有系统软件都安装在此，系统软件默认安装目录类似windows的program file /opt：第三方软件目录</p><p>/tmp：系统的临时目录</p><p>/var：变化的文件如日志文件和用户邮件</p><p>/srv：存放一些服务启动后需要提取的数据</p><p>/swap：用来创建虚拟内存</p><h3 id="_3-shell命令" tabindex="-1"><a class="header-anchor" href="#_3-shell命令" aria-hidden="true">#</a> 3.shell命令</h3><p>-h --help -字母 参数是空格加参数 --单词（长命令），用=接参数</p><p>pwd 显示当前所在的目录 dir 查看所有目录</p><p>cd 切换目录 cd. cd.. cd~ 用户home目录 cd- 上一个目录</p><p>mkdir 目录创建 mkdir a 建立目录 mkdir -p a/b/c</p><p>touch 创建空文件和更改时间戳 touch a.txt touch -d 20140122</p><p>rmdir 删除空目录</p><p>mv 移动文件和改文件名 mv oldname newname mv 文件名（可以多个） 新目录</p><p>rm 删除文件和目录 rm -rf abc 删除所有内容 r递归 f强制</p><p>cp 复制命令 cp -r dir1 dir2 递归复制，复制子目录信息 cp mysql-* /home/</p><p>tree 显示文件和目彔树 -a 不隐藏任何以.字符开始的条目 -d 只显示目录不显示文件 -f 每个文件都显示路径 -t 根据最后修改时间排序 -L n 只显示n层目录</p><p>ll 列出来的结果详细，有时间，是否可读写等信息，像windows里的 详细信息</p><p>ls 只列出文件名或目录名，就象windows里的列表 ls -a 显示隐藏目录 ls -t 按修改时间先后显示 ls -l 排列所有目录 ls -R ls -S 以文件大小排序 ls -m 横向输出文件名，并以，作分格符 ls -la 混合 ls -lah</p><p>查询的结果输入到a.txt中 写入操作很灵活 ls -l &gt; a.txt 覆盖写 ls -la &gt;&gt; a.txt 追加写 grep -n &#39;a&#39; a.txt &gt; b.txt 输出 a.txt &lt; b.txt</p><p>蓝色：目录 绿色：可执行文件 红色：压缩文件 浅蓝色：链接文件 灰色：其他文件</p>',41),c={id:"_4-vi-编辑器",tabindex:"-1"},m=p("a",{class:"header-anchor",href:"#_4-vi-编辑器","aria-hidden":"true"},"#",-1),h={href:"http://4.vi",target:"_blank",rel:"noopener noreferrer"},u=t('<p>查看文件 vi hello.java cat hello.java</p><p>一、首先进入命令模式 二、a i o 进入输入模式</p><p>x 删除光标后面的字符 x 删除光标后的＃个字符</p><p>X (大写 X)，删除光标前面的字符 X 删除光标前面的#个字符</p><p>dd 删除光标所在的行 dd 删除从光标所在行数的#行</p><p>yw 复制光标所在位置的一个字 yw 复制光标所在位置的#个字</p><p>yy 复制光标所在位置的一行 yy 复制从光标所在行数的#行</p><p>p 粘贴 u 取消操作 cw 更改光标所在位置的一个字</p><p>cw 更改光标所在位置的#个字</p><p>「r」：替换光标所在处的字符。 「R」：替换光标所到之处的字符，直到按下「ESC」键为止。 「u」：如果您误执行一个命令，可以马上按下「u」，回到上一个操作。 按多次“u”可以执行多次回复。</p><p>三、esc(按键) 进入末行模式Last line mode : wq 退出保存 q！退出不保存 强退 w filename 将文章以指定的文件名 filename 保存</p><h3 id="_5-linux账号" tabindex="-1"><a class="header-anchor" href="#_5-linux账号" aria-hidden="true">#</a> 5.linux账号</h3><p>u g o a useradd ruizhou 添加用户 -u UID 用来指定UID -g GROUP 定义用户的主要群组，GROUP必须已经存在 -G GROUP 指定用户的次要群组，可以指定多个次要群组，每个用,相连 -d HOME 指定用户的主目彔 -s SHELL 指定用户登入执行的程序 -r 建立一个系统用户的账号</p><p>passwd ruizhou 给添加用户设置密码</p><p>userdel ruizhou 删除用户 userdel -r ruizhou 删除用户及其用户主目录</p><p>高权限者root才能改变用户所在组 usermod -u UID rz<br> -g GROUP rz<br> -G GROUP rz<br> -d HOME rz 改变用户登入的初始目录 -s SHELL rz<br> -l newname rz -L rz -U rz</p><p>groupadd -g GID groupname 指定群组账号的标识符 -r groupname 指定添加的群组成为系统群组 -f groupname 强制执行</p><p>groupmod -g GID groupname -n newname groupname</p><p>groupdel groupname</p><h3 id="_6-文件管理" tabindex="-1"><a class="header-anchor" href="#_6-文件管理" aria-hidden="true">#</a> 6.文件管理</h3><p>Linux下的文件可以分为5种不同的类型：普通文件、目录文件、链接文 件、设备文件和管道文件。</p><p>白色：普通文件 红色：压缩文件 蓝色：目录文件 浅蓝色：链接文件 黄色：设备文件（/dev） 绿色：可执行文件（/bin、/sbin） 粉红色：图片文件</p><p>cat 显示文件内容 file 显示文件类型</p><p>查找文件 find / -name hello.java</p><p>查找文件内容 more a.tex | grep -n &#39;abc&#39; abc出现以及行数 less 同上</p><p>实例： javac hello.java 编译（会生成hello.class文件） | gcc hello.cpp 编译（C++，生成a.out）--- 可以改进：gcc -o nwename hello.cpp (没有.out)</p><p>java hello 运行（运行的是.class文件也就是编译后的文件）| ./a.out (a.out 自动生成，文件名&#39;a&#39;也是)</p><p>head -n file tail -n file tail -f file 监视文件</p><p>drwxrwxrwx d l - | c b p s r 读（查看文件） w 写（删建文件、重命名） x 执行（进入目录）</p><p>文件的权限变更 操作用户：root用户和文件的所有者 chmod {u,g,o,a} {+,-,=} {r,w,x} filename chmod {777-111} filename</p><p>chmod 755 abc 0:--- 1:--x 2:-w- 3:-wx 4:r-- 5:r-x 6:rw- 7:rwx chmod u=rwx,g=rx,o=rx abc chmod u-x,g+w abc</p><p>改变文件拥有者和拥有组 操作用户：root chown ruizhou abc chown rz:admin abc.txt 或者 chown rz.admin abc.txt chown ruizhou ./abc chown -R ruizhou ./abc 包含子文件（夹）</p><p>改变文件用户组 操作用户：root用户和文件的所有者（必须是组成员） chgrp admin abc</p><p>文件相关知识 i-节点的信息，一个文件的i-节点信息集合叫做该文件的状态（startus） stat a.txt</p><p>硬链接 同一个文件保存在两个地方或不同的文件名 两个文件是同一个文件，不是快捷方式 ln /etc/inittab（目标文件） inittab（链接文件） 软链接 类似快捷方式 通过一个文件来访问目标文件 ln -s /etc/inittab inittab</p><p>find {搜索目录} {搜索条件} [动作] -size n 文件的大小 -type 文件的类型（f普通、d目录、i软连接） -name：按照文件名查找文件。支持统配符*和？ -user： 按照文件属主来查找文件 -group：按照文件所属的组来查找文件 -mtime n：按照文件的更改时间来查找文件 -atime n：搜索在过去n天读取过的文件 -ctime n：搜索在过去n天修改过的文件</p><p>-mtime +n ：列出在n天前(不含n天本身)被更改过内容的文件名 -mtime -n ：列出在n天内(含n天本身)被更改过内容的文件名 -print：输出搜索结果，并且打印</p><p>find /home -size +10k find /etc -name &#39;*ab&#39; find /etc -size +500000c(字节) -and -mtime +1</p><p>-exec command {} \\ ; -ok command {} \\ ; 与-exec相同，但是提示确认没个文件的操作</p><p>find /root -name 1.txt -exec ls -l {} ; find /root -name 1.txt -ok -exec rm {} ;</p><p>压缩文件 gzip .gz gzip -c file 将输出重定向到标准输出 gzip -d file 解压缩文件 gzip -r file gzip -1...9 file</p><p>bzip .bz bzip -c file 将输出重定向到标准输出 bzip -d file 解压缩文件</p><p>文件归档tar<br> 文件归档可以把整个目录树保存在同一个文件中 tar命令用于创建、列出、抽取归档文件 归档文件通常也会一并压缩</p><p>tar [op] file -c 创建归档文件 -x 释放文档 -v 显示详细信息 -f 文件名（可带路径） -z 使用 gzip 压缩 -j 使用 bzip2 压缩</p><p>tar zcvf 1.tar.gz 1/ 目录 tar jcvf 2.tar.bz2 2/ tar jcvf a.tar.bz2 a.txt 文件</p><h3 id="_7-启动流程" tabindex="-1"><a class="header-anchor" href="#_7-启动流程" aria-hidden="true">#</a> 7.启动流程</h3><h3 id="_8-linux-服务" tabindex="-1"><a class="header-anchor" href="#_8-linux-服务" aria-hidden="true">#</a> 8.linux 服务</h3><p>系统服务 网络服务</p><p>/etc/rc.d/init.d/里面每一个文件就是某一个服务的启劢程序文件</p><p>-start： 启动这个服务 -stop： 停止这个服务 -restart： 先停止，再启动，也就是重新启动的意思。 -reload： 重载配置文件，这个参数只有在服务已经启动的状况下才能使用 -condrestart：有条件的重新启动，这个服务必须是已经启动的，才会被 重新启动；如果这个服务尚未启动，则无须启动之 -status： 查看目前服务的启动状态 ./sshd status</p><p>服务操作快捷命令 service filename action(start stop status)</p><p>守护进程 /etc/xinetd.d service xinetd start/stop/status</p><p>服务自启动 chkconfig chkconfig --list chkconfig --add httpd chkconfig --del httpd chkconfig --list mysqld 查看mysqld在7种模式下的自启动结果 chkconfig --level 35 mysqld on 设定 chkconfig mysqld on 2345自启动</p><p>进程管理 ps ps aux/lax auxf 加个f，可以查看父子进程关系 ps aux 静态</p><p>top 可动态</p><p>top -d 10 10s刷新一次 top root 只看root用户的</p><p>退出top ctrl+c</p><p>pgrep 是通过程序的名字来查询进程的工具 pgrep -l httpd pgrep -ln httpd pgrep -lo httpd pgrep httpd</p><p>终止进程的工具 kill 、killall、pkill kill pid 单独进程杀死 kill 135 或者 kill -s 135 kill -9 135 pkill/killall 正在运行的程序名</p><p>软件包管理 软件安装 rpm 参数 软件包 -i：安装。 -U：升级安装，如果不存在也安装。 -F：更新安装，如果不存在也安装。 -v：查看信息。 -h：有进度条。 --replacepkgs：强制覆盖安装。 --nodeps：不考虑相依属性。 -q &lt;软件名&gt;：查询。 -qa：查询所有。 -ql &lt;软件名&gt;：列出软件的文件清单。 -qi &lt;软件名&gt;：列出软件信息。 -qf &lt;文件名&gt;：查询文件所属软件。 -e &lt;软件名&gt;：删除软件。</p><p>rpm -ivh bind-9.3.6-4.P1.el5_4.2.i386.rpm#安装 rpm -Uvh/Fvh bind-9.3.6-4.P1.el5_4.2.i386.rpm #升级安装 rpm -e bind-9.3.6-4.P1.el5_4.2.i386 #删除软件包 rpm -qpi *.rpm #查看软件包里的内容 rpm -qpl *.rpm #查看软件包将会在系统里安装哪些部分 rpm –qa #列出所有被安装的 rpm 软件包</p><p>挂载 mount /mnt/cdrom/ 卸载 umount /mnt/cdrom/</p><p>yum源制作本地源和163网络源 配置/etc/yum.repos.d/server.repo</p>',63),x={href:"http://mirrors.163.com/.help/CentOS6-Base-163.repo",target:"_blank",rel:"noopener noreferrer"},b=t("<p>文件系统 查看系统分区情况 fdisk -l</p><p>查看磁盘使用情况 df -l df -h df -b 查看目录在哪个分区 df 目录</p><p>du -sh 统计目录（戒文件）所占磁盘空间的大小</p><p>date date //显示当前日期</p><p>date -s //设置当前时间，只有 root 权限才能设置，其他只能查看。</p><p>date -s 20061010 //设置成 20061010，这样会把具体时间设置成空 00:00:00</p><p>date -s 12:23:23 //设置具体时间，丌会对日期做更改</p><p>date -s “12:12:23 2006-10-10″ //这样可以设置全部时间</p><p>hwclock –w 把当前系统时间写入到 cmos 芯片</p><p>网络时间协议 ntp ntpdate 服务器地址 vi /etc/ntp/ntpservers 直接写入服务器即可</p><p>设置语言 locale 查看目前语言系统环境 $HOME/.i18n 更改用户自己的语言环境</p><p>查看目前使用的环境变量：shell env</p><p>切换shell chsh -s /bin/csh</p><p>man 指令 找帮助 /p 查找帮助中的关键字，然后键盘n就是向下翻</p><p>lamp环境搭建 环境开发包</p><p>.bin ./*.bin</p><p>.tar.gz .tar.bz tar -zxvf ****.tar.gz tar -jxvf ****.tar.bz ./configure --prefix=/opt make make install 查询安装软件的信息 rpm -qa | more rpm -qa | grep xxx</p><p>rpm -q mysql rpm -q xinetd rpm -q foo rpm -q xinetd file bash</p><p>rpm -qi file</p><p>rpm -ql file rpm -ql jdk</p><p>rpm -qf 文件全路径名 rpm -qp 包文件名</p><p>rpm -ivh 包全路径名 install 安装 verbose 提示 hash 进度条</p><p>rpm -e rpm包名称 强制卸载 rpm -e --nodeps prm包名称</p><p>安装samba</p><p>设置samba smbpasswd -a 已存在的linux用户名</p>",25),f={href:"http://mksmbpasswd.sh",target:"_blank",rel:"noopener noreferrer"},g=t("<p>启动 service smb start/stop/restart</p><p>软件装好后启动 到该软件安装目录下，找到可执行文件 如 .ini ./eclipse &amp; 以后台方式启动，释放控制台给用户</p><p>最近执行的5个命令 history 5</p><p>历史执行命令列表的快捷执行 !480 执行编号为480的历史执行命令 !ls 执行最近一次以ls开头的命令</p><p>设置网络三种方法 1 图形操作 setup</p><p>需要 /etc/rc.d/init.d/network restart</p><p>2 立即生效，注销后会恢复之前的设置 ifconfig eth0 address x.x.x.x netmask x.x.x.x 或者 ifconfig eth0 x.x.x.x 只配ip</p><p>3 根源文件修改 /etc/sysconfig/network-scripts/ifcfg-eth0</p><p>需要 /etc/rc.d/init.d/network restart</p><p>任务调度 crontab -e M h D m d program *为每一 终止任务调度 crontab -r 列出当前有哪些任务调度 crontab -l ////////////////////////////////////</p><p>!/bin/bash</p><p>extdir=&#39;/home/mysql/backup/&#39;; extbase=&#39;auto_databasename_&#39;<code>date &#39;+%F&#39;</code>;echo $extbase; extfile=&#39;auto_databasename_&#39;<code>date &#39;+%F&#39;</code>&#39;.sql&#39;;echo $extfile;</p>",12),_=p("p",null,[a('echo "开始备份数据..." cd $extdir mysqldump --opt databasename -u username -ppassword | gzip > '),p("span",{class:"katex"},[p("span",{class:"katex-mathml"},[p("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[p("semantics",null,[p("mrow",null,[p("mi",null,"e"),p("mi",null,"x"),p("mi",null,"t"),p("mi",null,"d"),p("mi",null,"i"),p("mi",null,"r")]),p("annotation",{encoding:"application/x-tex"},"extdir")])])]),p("span",{class:"katex-html","aria-hidden":"true"},[p("span",{class:"base"},[p("span",{class:"strut",style:{height:"0.6944em"}}),p("span",{class:"mord mathnormal"},"e"),p("span",{class:"mord mathnormal"},"x"),p("span",{class:"mord mathnormal"},"t"),p("span",{class:"mord mathnormal"},"d"),p("span",{class:"mord mathnormal"},"i"),p("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r")])])]),a(`extfile.gz echo "删除本地7天前的备份数据..." old_file='auto_databasename_'`),p("code",null,"date '+%F' --date='7 days ago'"),a("'.*' echo $old_file rm -rf "),p("span",{class:"katex"},[p("span",{class:"katex-mathml"},[p("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[p("semantics",null,[p("mrow",null,[p("mi",null,"e"),p("mi",null,"x"),p("mi",null,"t"),p("mi",null,"d"),p("mi",null,"i"),p("mi",null,"r")]),p("annotation",{encoding:"application/x-tex"},"extdir")])])]),p("span",{class:"katex-html","aria-hidden":"true"},[p("span",{class:"base"},[p("span",{class:"strut",style:{height:"0.6944em"}}),p("span",{class:"mord mathnormal"},"e"),p("span",{class:"mord mathnormal"},"x"),p("span",{class:"mord mathnormal"},"t"),p("span",{class:"mord mathnormal"},"d"),p("span",{class:"mord mathnormal"},"i"),p("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r")])])]),a("old_file")],-1),w=t("<ul><li>3 * * * /usr/share/jetty6/cron/mysql_databasename_backup.sh &gt; /usr/share/jetty6/cron/mysql_autoback_cron_log.txt</li></ul><p>crontab mysql_autoback_cron.sh</p><p>netstat -an -a (all)显示所有选项，默认不显示LISTEN相关 -t (tcp)仅显示tcp相关选项 -u (udp)仅显示udp相关选项 -n 拒绝显示别名，能显示数字的全部转化成数字。 -l 仅列出有在 Listen (监听) 的服務状态</p><p>-p 显示建立相关链接的程序名 -r 显示路由信息，路由表 -e 显示扩展信息，例如uid等 -s 按各个协议进行统计 -c 每隔一个固定时间，执行该netstat命令。 提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到</p><p>进入mysql cd bin ./mysql -u root -p<br> 退出mysql quit或者exit</p><p>备份恢复都不要在mysql&gt; 下进行 备份 多库 d1,d2,d3 多表 d1.tab,d1.user 退出，在bin目录下执行，如有环境变量设置过，则任意目录</p><p>ssh</p><p>netstat -anp 多一个p可以显示pid进程id</p><p>.bashrc配置</p><p>临时加入一个路径 export PATH=$PATH:/root/</p><p>显示系统当前所有定义的alias alias</p><p>定义alias alias cl=&#39;ls -l /home&#39;</p><p>压缩</p><p>zip a.zip 文件名 zip a.zip 文件1 文件2 zip -r a.zip 文件夹名路径</p><p>参数 -m 删除原文件（夹） -r 下面用的很少 -j 忽略子目录内容 -n 将已压缩或者没有必要压缩的文件去掉 zip -n .mpg: .jpg: .gif</p><p>解压 unzip 文件名</p><p>查看压缩包 unzip -Z 压缩文件名</p><p>chkconfig</p><p>chkconfig networkmange off</p>",19);function k(z,v){const e=l("ExternalLinkIcon");return s(),i("div",null,[d,p("h3",c,[m,a(),p("a",h,[a("4.vi"),r(e)]),a(" 编辑器")]),u,p("p",null,[a("下载方式： wget "),p("a",x,[a("http://mirrors.163.com/.help/CentOS6-Base-163.repo"),r(e)])]),b,p("p",null,[a("加所有用户加入samba服务器中 cat /etc/passwd | "),p("a",f,[a("mksmbpasswd.sh"),r(e)]),a(" > /etc/smb/smbpasswd （.sh为脚本可执行） smbpasswd -s 已存在的linux用户名 (或者去掉'-s')")]),g,_,w])}const y=n(o,[["render",k],["__file","linux 命令杂项.html.vue"]]);export{y as default};
